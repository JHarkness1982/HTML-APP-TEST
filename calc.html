<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calcolatrice</title>
<style>
    body {
        margin: 0;
        background: #000;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: -apple-system, BlinkMacSystemFont, Roboto, Arial, sans-serif;
    }

    .calculator { 
        width: 90vw; 
        max-width: 420px; 
        height: 80vh; 
        max-height: 700px;
        background: #1c1c1c;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 0;
    }

    .title-bar {
        color: #fff;
        font-size: 16px;
        padding: 10px 15px;
        opacity: 0.8;
    }

    .display {
        flex: 1;
        background: #121212;
        color: #fff;
        font-size: 48px;
        text-align: right;
        padding: 20px 15px;
        box-sizing: border-box;
        overflow: hidden;
    }

    .keys {
        flex: 2;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(5, 1fr);
    }

    .key {
        border: none;
        margin: 0;
        font-size: 26px;
        font-weight: 500;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        user-select: none;
        border-radius: 0;
    }

    .key.gray {
        background: #e0e0e0;
        color: #000;
    }

    .key.orange {
        background: #f57c00;
        color: #fff;
    }

    .key:active {
        filter: brightness(1.1);
    }
</style>
</head>
<body>

<div class="calculator">
    <div class="title-bar">Calculator</div>
    <div id="display" class="display">0</div>
    <div class="keys">
        <div class="key gray" data-action="clear">AC</div>
        <div class="key gray" data-action="percent">%</div>
        <div class="key gray" data-action="toggle">+/−</div>
        <div class="key orange" data-value="/">÷</div>

        <div class="key gray" data-value="7">7</div>
        <div class="key gray" data-value="8">8</div>
        <div class="key gray" data-value="9">9</div>
        <div class="key orange" data-value="*">×</div>

        <div class="key gray" data-value="4">4</div>
        <div class="key gray" data-value="5">5</div>
        <div class="key gray" data-value="6">6</div>
        <div class="key orange" data-value="-">−</div>

        <div class="key gray" data-value="1">1</div>
        <div class="key gray" data-value="2">2</div>
        <div class="key gray" data-value="3">3</div>
        <div class="key orange" data-action="fullscreen">+</div>

        <div class="key gray" data-value="0">0</div>
        <div class="key gray" data-value=".">.</div>
        <div class="key gray" data-action="backspace">⌫</div>
        <div class="key orange" data-action="equal">=</div>
    </div>
</div>

<script>
    const PIN = "7412"; // <-- PIN aggiornato
    let input = "";

    const display = document.getElementById("display");
    const keys = document.querySelectorAll(".key");

    function updateDisplay() {
        display.textContent = input || "0";
    }

    function clearDisplay() {
        input = "";
        updateDisplay();
    }

    function backspace() {
        input = input.slice(0, -1);
        updateDisplay();
    }

    function toggleSign() {
        if (!input) return;
        if (input.startsWith("-")) {
            input = input.slice(1);
        } else {
            input = "-" + input;
        }
        updateDisplay();
    }

    function applyPercent() {
        if (!input) return;
        try {
            const value = eval(input);
            input = (value / 100).toString();
            updateDisplay();
        } catch {
            display.textContent = "Errore";
            input = "";
        }
    }

    function goFullscreen() {
        if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen().catch(() => {});
        }
    }

    function calculate() {
        if (input === PIN) {
            setTimeout(() => {
                window.location.href = "https://hydrogen.element.io";
            }, 300);
            return;
        }
        try {
            input = eval(input).toString();
            updateDisplay();
        } catch {
            display.textContent = "Errore";
            input = "";
        }
    }

    keys.forEach(key => {
        key.addEventListener("click", () => {
            const value = key.getAttribute("data-value");
            const action = key.getAttribute("data-action");

            if (value) {
                input += value;
                updateDisplay();
                return;
            }

            if (!action) return;

            switch (action) {
                case "clear":
                    clearDisplay();
                    break;
                case "backspace":
                    backspace();
                    break;
                case "toggle":
                    toggleSign();
                    break;
                case "percent":
                    applyPercent();
                    break;
                case "fullscreen":
                    goFullscreen();
                    break;
                case "equal":
                    calculate();
                    break;
            }
        });
    });
</script>

</body>
</html>

